name: Tests

on: [pull_request]

jobs:
    tests:
        runs-on: ubuntu-latest

        strategy:
            matrix:
                php-version: [8.0, nightly]

        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: Setup Environment
              run: |
                  docker build . -t php8-env
                  docker run -d --name tests php8-env

            - name: Run Tests
              run: docker exec tests composer test